<!DOCTYPE html>
<html lang="en-us" dir="ltr">
<head>
  <meta charset="UTF-8">
<title>Fixing Audio for Arch Laptop | Alex&#39; KB</title>




  

  

  

  

  

  

  

  

  

  

  


<link rel="stylesheet" href="/css/combined.min.7799b065e22a7e40b8c8f26557c8a35f60fae8cf71a555a2d627ea4c46e608e4.css" integrity="sha256-d5mwZeIqfkC4yPJlV8ijX2D66M9xpVWi1ifqTEbmCOQ=" crossorigin="anonymous">


<link href="https://fonts.cdnfonts.com/css/general-sans" rel="stylesheet">

<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
<link href='https://fonts.googleapis.com/css?family=JetBrains Mono' rel='stylesheet'>
<link href="https://fonts.googleapis.com/css2?family=Abril+Fatface&family=Anton&family=Dosis:wght@500&display=swap" rel="stylesheet">


<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Abril+Fatface&family=Anton&family=Dosis:wght@500&family=Geist:wght@100..900&family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&family=Roboto:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">


<script src="/js/bundle.1f0fbf7be1bb32e26503f0e21ceda404ef60319a5656af25da14afaeb470cc17.js" integrity="sha256-Hw&#43;/e&#43;G7MuJlA/DiHO2kBO9gMZpWVq8l2hSvrrRwzBc=" crossorigin="anonymous" defer></script>

<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="me" href="https://defcon.social/@alexb">
<meta name="theme-color" content="#313751">
<meta property="og:site_name" content="Alex Knowledge Base" />
<meta name="fediverse:creator" content="@alexb@defcon.social" />
<meta name="description" content="This Knowledge Base is an ‘it works on my machine’ project where I document all the details the brain might not remember later. Preflight of my blog." />


<meta name="date" content="2026-01-19" />


<meta property="og:type" content="article" />
<meta property="article:published_time" content="2026-01-19T13:07:00&#43;01:00" />


<meta property="og:title" content="Fixing Audio for Arch Laptop" />
<meta property="og:description" content="This Knowledge Base is an ‘it works on my machine’ project where I document all the details the brain might not remember later. Preflight of my blog." />
<meta property="og:url" content="https://kb.alexbutenschoen.com/posts/fixing-audio-for-arch-laptop/" />
<meta property="og:image" content="https://kb.alexbutenschoen.com/images/default.png" />





<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "@id": "https:\/\/kb.alexbutenschoen.com\/posts\/fixing-audio-for-arch-laptop\/#blogposting",
  "headline": "Fixing Audio for Arch Laptop",
  "image": "",
  "author": {
    "@type": "Person",
    "name": ""
  },


  "genre": []
  "keywords": 


  "wordCount": "449",


  "publisher": {
    "@type": "Organization",
    "name": "",
    "logo": {
      "@type": "ImageObject",
      "url": ""
    }
  },
  "url": "https:\/\/kb.alexbutenschoen.com\/posts\/fixing-audio-for-arch-laptop\/",
  "datePublished": "2026-01-19T13:07:00\u002b01:00",
  "dateModified": "2026-01-19T13:07:00\u002b01:00",
  "description": "",
  "mainEntityOfPage": "https:\/\/kb.alexbutenschoen.com\/posts\/fixing-audio-for-arch-laptop\/"
}
</script>




</head>
<body>
  <header>
    <nav>
    <div class="navbar-left">
        <div class="navbar-title"><a href="/">Alex&#39; KB</a></div>

    </div>

    <div class="navbar-right">
        <button class="toggle-dark-mode" id="themeToggle">
    <i class="fa-solid fa-circle-half-stroke" style="color: var(--text-color);"></i>
</button>
        



  <nav class="navbar-list">
    <ul>



    <li>
      <a href="https://alexbutenschoen.com/about">About</a>
    </li>
    </ul>
  </nav>





    </div>
</nav>
  </header>
  <main>
    
  <h1 class="blogpost-title">Fixing Audio for Arch Laptop</h1>



  

 


<div class="pageinfo">
    <ul>
        <li><i></i> 19 Jan 2026</li> 
        <li><i class="fa-regular fa-keyboard"></i> 449 words.</li>
	
    </ul>
</div>

   


  <div class="single-content"><h2 id="problem-overview">Problem Overview</h2>
<p>ASUS Zenbook laptops with Ryzen APUs and Realtek ALC294 audio codec suffer from <strong>no analog speaker output</strong> on Arch Linux with PipeWire. Hardware detects fine (<code>aplay -l</code> shows Card 1 Device 0: ALC294 Analog), <code>speaker-test -D plughw:1,0</code> requires manual codec unmuting, but PipeWire/WirePlumber <strong>never creates ALC294 playback sinks</strong>—only HDMI and microphone appear in <code>wpctl status</code>. HiFi profiles fail due to broken port detection; <strong>Pro Audio profile works reliably</strong>.</p>
<h2 id="root-causes">Root Causes</h2>
<p><strong>1. ALC294 Codec Mute State</strong>: Realtek laptop codecs default to hardware-muted speakers post-boot. Windows firmware handles unmuting; Linux needs <code>hda-verb</code> on pins 0x20/0x21/0x1b.</p>
<p><strong>2. Ryzen HD Audio Controller</strong>: AMD ACP (Audio Co-Processor) confuses WirePlumber—device appears as both capture (mic works) and potential playback, but analog profile never activates.</p>
<p><strong>3. WirePlumber Port Detection</strong>: HiFi profiles expect jack sensing/speaker switching that ALC294 doesn&rsquo;t implement properly, causing sink creation to fail silently.</p>
<p><strong>4. ASUS Firmware Quirks</strong>: Fast Boot (UEFI + Windows) leaves codec in inconsistent state; Linux needs explicit pin control.</p>
<hr>
<h2 id="complete-working-solution">Complete Working Solution</h2>
<ol>
<li>Install tools</li>
</ol>
<div class="code-block language-bash" data-lang="bash" id="code-1895c7e60b1cf712">
  <div class="code-header">
    <span class="code-language">bash</span>
  </div>
  <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo pacman -S alsa-utils alsa-tools alsa-firmware sof-firmware pavucontrol</span></span></code></pre></td></tr></table>
</div>
</div>
</div>



<p>Check audio sinks:</p>
<div class="code-block language-bash" data-lang="bash" id="code-1895c7e60b33a843">
  <div class="code-header">
    <span class="code-language">bash</span>
  </div>
  <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">pactl list short sinks</span></span></code></pre></td></tr></table>
</div>
</div>
</div>



<ol start="2">
<li>Unmute codec (critical for ALC294)</li>
</ol>
<div class="code-block language-bash" data-lang="bash" id="code-1895c7e60b3997fd">
  <div class="code-header">
    <span class="code-language">bash</span>
  </div>
  <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">alsamixer -c <span class="m">1</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>



<p>Enable it so it shows <code>OO</code> instead of <code>MM</code>, with pressing m. (Muting and unmuting).</p>
<p>(also keep in mind to switch between audio sinks with <code>F6</code> if not working)</p>
<div class="code-block language-bash" data-lang="bash" id="code-1895c7e60b3d8e01">
  <div class="code-header">
    <span class="code-language">bash</span>
  </div>
  <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo hda-verb /dev/snd/hwC1D0 0x20 SET_PIN_WIDGET_CONTROL 0x40
</span></span><span class="line"><span class="cl">sudo hda-verb /dev/snd/hwC1D0 0x21 SET_PIN_WIDGET_CONTROL 0x40
</span></span><span class="line"><span class="cl">sudo hda-verb /dev/snd/hwC1D0 0x1b SET_PIN_WIDGET_CONTROL 0x40</span></span></code></pre></td></tr></table>
</div>
</div>
</div>



<ol start="3">
<li>Test ALSA directly</li>
</ol>
<div class="code-block language-bash" data-lang="bash" id="code-1895c7e60b4c71d0">
  <div class="code-header">
    <span class="code-language">bash</span>
  </div>
  <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">speaker-test -c <span class="m">2</span> -D plughw:1,0 -t sine -f <span class="m">1000</span>  <span class="c1"># Hears tone</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>



<ol start="4">
<li>Persist hda-verb via udev</li>
</ol>
<div class="code-block language-bash" data-lang="bash" id="code-1895c7e60b6a6c43">
  <div class="code-header">
    <span class="code-language">bash</span>
  </div>
  <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s1">&#39;ACTION==&#34;change&#34;, SUBSYSTEM==&#34;sound&#34;, KERNEL==&#34;card1&#34;, RUN+=&#34;/usr/bin/hda-verb /dev/snd/hwC1D0 0x20 SET_PIN_WIDGET_CONTROL 0x40&#34;&#39;</span> <span class="p">|</span> sudo tee /etc/udev/rules.d/90-alc294.rules
</span></span><span class="line"><span class="cl">sudo udevadm control --reload-rules <span class="o">&amp;&amp;</span> sudo udevadm trigger</span></span></code></pre></td></tr></table>
</div>
</div>
</div>



<ol start="5">
<li>
<p>Set Pro Audio profile (key step)
pavucontrol → Configuration → &ldquo;Ryzen HD Audio Controller&rdquo; → Pro Audio</p>
</li>
<li>
<p>Restart PipeWire</p>
</li>
</ol>
<div class="code-block language-bash" data-lang="bash" id="code-1895c7e60b7c87b0">
  <div class="code-header">
    <span class="code-language">bash</span>
  </div>
  <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">systemctl --user restart pipewire pipewire-pulse wireplumber</span></span></code></pre></td></tr></table>
</div>
</div>
</div>



<ol start="7">
<li>Verify</li>
</ol>
<div class="code-block language-bash" data-lang="bash" id="code-1895c7e60b822ab6">
  <div class="code-header">
    <span class="code-language">bash</span>
  </div>
  <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">wpctl status  <span class="c1"># ALC294 sink appears</span>
</span></span><span class="line"><span class="cl">pw-play /usr/share/sounds/alsa/Front_Left.wav  <span class="c1"># Speakers work</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>



<hr>
<h3 id="overview">Overview</h3>
<p>ALSA (hw:1,0) → [hda-verb unmute] → speaker-test WORKS
↓
PipeWire → [Pro Audio profile bypasses port detection] → ALC294 sink created → Apps play through speakers</p>
<p><strong>Pro Audio</strong> uses raw ALSA <code>hw:1,0</code> access with manual FL/FR channel mapping—no reliance on ALC294&rsquo;s broken jack sensing or port routing that breaks HiFi profiles. Full 24-bit/48kHz quality preserved.</p>
<h3 id="permanent-configuration">Permanent Configuration</h3>
<p><strong><code>/etc/udev/rules.d/90-alc294.rules</code></strong> ensures codec unmuting on every boot. <strong>Pro Audio profile</strong> in pavucontrol persists via PipeWire session state. Reboot-safe.</p>
<ul>
<li><strong>Identical hardware</strong> across UX3405/UX363/S13 models (Ryzen + ALC294)</li>
<li><strong>Same failure pattern</strong> documented since 2020 across Ubuntu/Fedora/Manjaro</li>
<li><strong>Arch bleeding-edge kernels</strong> expose the issue most reliably (newer SOF firmware helps detection but not activation)</li>
<li><strong>Solution identical</strong> across distros: hda-verb + Pro Audio profile</li>
</ul></div>





<div class="readon">
  
<div class="post-navigation">


  <div class="prev">
      
	<p>&lt;-- Previous on</p>
        <a class="previous-post" href="https://kb.alexbutenschoen.com/posts/fast-updates-arch-linux/">Fast Updates - Arch Linux</a>
      
  </div>
  <div class="next">
      
	<p>Up next --></p>
        <a class="next-post" href="https://kb.alexbutenschoen.com/posts/setup-samba-share/">Setup Samba Share</a>
      

  </div>

</div>


</div>


  

  
  
  </main>
  <footer>
    <p>Alex' Knowledge Base &copy; 2026.</p>
  </footer>
</body>
</html>
