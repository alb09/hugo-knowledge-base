<!DOCTYPE html>
<html lang="en-us" dir="ltr">
<head>
  <meta charset="UTF-8">
<title>Proxmox Health | Alex&#39; KB</title>




  

  

  

  

  

  

  

  

  

  

  


<link rel="stylesheet" href="/css/combined.min.7799b065e22a7e40b8c8f26557c8a35f60fae8cf71a555a2d627ea4c46e608e4.css" integrity="sha256-d5mwZeIqfkC4yPJlV8ijX2D66M9xpVWi1ifqTEbmCOQ=" crossorigin="anonymous">


<link href="https://fonts.cdnfonts.com/css/general-sans" rel="stylesheet">

<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
<link href='https://fonts.googleapis.com/css?family=JetBrains Mono' rel='stylesheet'>
<link href="https://fonts.googleapis.com/css2?family=Abril+Fatface&family=Anton&family=Dosis:wght@500&display=swap" rel="stylesheet">


<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Abril+Fatface&family=Anton&family=Dosis:wght@500&family=Geist:wght@100..900&family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&family=Roboto:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">


<script src="/js/bundle.1f0fbf7be1bb32e26503f0e21ceda404ef60319a5656af25da14afaeb470cc17.js" integrity="sha256-Hw&#43;/e&#43;G7MuJlA/DiHO2kBO9gMZpWVq8l2hSvrrRwzBc=" crossorigin="anonymous" defer></script>

<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="me" href="https://defcon.social/@alexb">
<meta name="theme-color" content="#313751">
<meta property="og:site_name" content="Alex Knowledge Base" />
<meta name="fediverse:creator" content="@alexb@defcon.social" />
<meta name="description" content="This Knowledge Base is an ‘it works on my machine’ project where I document all the details the brain might not remember later. Preflight of my blog." />


<meta name="date" content="2026-02-09" />


<meta property="og:type" content="article" />
<meta property="article:published_time" content="2026-02-09T14:49:54&#43;01:00" />


<meta property="og:title" content="Proxmox Health" />
<meta property="og:description" content="This Knowledge Base is an ‘it works on my machine’ project where I document all the details the brain might not remember later. Preflight of my blog." />
<meta property="og:url" content="https://kb.alexbutenschoen.com/posts/proxmox-health/" />
<meta property="og:image" content="https://kb.alexbutenschoen.com/images/default.png" />





<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "@id": "https:\/\/kb.alexbutenschoen.com\/posts\/proxmox-health\/#blogposting",
  "headline": "Proxmox Health",
  "image": "",
  "author": {
    "@type": "Person",
    "name": ""
  },


  "genre": []
  "keywords": "proxmox"


  "wordCount": "199",


  "publisher": {
    "@type": "Organization",
    "name": "",
    "logo": {
      "@type": "ImageObject",
      "url": ""
    }
  },
  "url": "https:\/\/kb.alexbutenschoen.com\/posts\/proxmox-health\/",
  "datePublished": "2026-02-09T14:49:54\u002b01:00",
  "dateModified": "2026-02-09T14:49:54\u002b01:00",
  "description": "\u003cp\u003eJust some useful commands for Proxmox Virtual Environment.\u003c\/p\u003e",
  "mainEntityOfPage": "https:\/\/kb.alexbutenschoen.com\/posts\/proxmox-health\/"
}
</script>




</head>
<body>
  <header>
    <nav>
    <div class="navbar-left">
        <div class="navbar-title"><a href="/">Alex&#39; KB</a></div>

    </div>

    <div class="navbar-right">
        <button class="toggle-dark-mode" id="themeToggle">
    <i class="fa-solid fa-circle-half-stroke" style="color: var(--text-color);"></i>
</button>
        



  <nav class="navbar-list">
    <ul>



    <li>
      <a href="https://alexbutenschoen.com/about">About</a>
    </li>
    </ul>
  </nav>





    </div>
</nav>
  </header>
  <main>
    
  <h1 class="blogpost-title">Proxmox Health</h1>



  

 


<div class="pageinfo">
    <ul>
        <li><i></i> 09 Feb 2026</li> 
        <li><i class="fa-regular fa-keyboard"></i> 199 words.</li>
	
    </ul>
</div>

   


  <div class="single-content"><p>Just some useful commands for Proxmox Virtual Environment.</p>
<p>Watch system processes:</p>
<div class="code-block language-bash" data-lang="bash" id="code-1895c8857375be72">
  <div class="code-header">
    <span class="code-language">bash</span>
  </div>
  <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">htop
</span></span><span class="line"><span class="cl">top</span></span></code></pre></td></tr></table>
</div>
</div>
</div>



<p>Show disk usage:</p>
<div class="code-block language-bash" data-lang="bash" id="code-1895c885738ca851">
  <div class="code-header">
    <span class="code-language">bash</span>
  </div>
  <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">pvesm status</span></span></code></pre></td></tr></table>
</div>
</div>
</div>



<p>Show root filesystem:</p>
<div class="code-block language-bash" data-lang="bash" id="code-1895c88573916617">
  <div class="code-header">
    <span class="code-language">bash</span>
  </div>
  <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">df -Th /</span></span></code></pre></td></tr></table>
</div>
</div>
</div>



<p>Check RAM:</p>
<div class="code-block language-bash" data-lang="bash" id="code-1895c885739b3383">
  <div class="code-header">
    <span class="code-language">bash</span>
  </div>
  <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">watch -n <span class="m">2</span> free -h</span></span></code></pre></td></tr></table>
</div>
</div>
</div>



<p>Enable memory overcommit vor Virtual Machines:</p>
<div class="code-block language-bash" data-lang="bash" id="code-1895c88573bae3ed">
  <div class="code-header">
    <span class="code-language">bash</span>
  </div>
  <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;vm.overcommit_memory=1&#34;</span> &gt;&gt; /etc/sysctl.conf</span></span></code></pre></td></tr></table>
</div>
</div>
</div>



<p>Check Swap:</p>
<div class="code-block language-bash" data-lang="bash" id="code-1895c88573dff492">
  <div class="code-header">
    <span class="code-language">bash</span>
  </div>
  <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">cat /proc/swaps</span></span></code></pre></td></tr></table>
</div>
</div>
</div>



<p>Change swappiness:</p>
<div class="code-block language-bash" data-lang="bash" id="code-1895c88573e458f5">
  <div class="code-header">
    <span class="code-language">bash</span>
  </div>
  <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;vm.swappiness=10&#34;</span> &gt;&gt; /etc/sysctl.conf</span></span></code></pre></td></tr></table>
</div>
</div>
</div>



<p>Check swappiness:</p>
<div class="code-block language-bash" data-lang="bash" id="code-1895c88573e9b5b4">
  <div class="code-header">
    <span class="code-language">bash</span>
  </div>
  <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sysctl -p</span></span></code></pre></td></tr></table>
</div>
</div>
</div>



<p>Flushes swap usage and clears old RAM pages  (without reboot)</p>
<div class="code-block language-bash" data-lang="bash" id="code-1895c88573f4745c">
  <div class="code-header">
    <span class="code-language">bash</span>
  </div>
  <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">swapoff -a
</span></span><span class="line"><span class="cl">swapon -a</span></span></code></pre></td></tr></table>
</div>
</div>
</div>



<p>Shows all active swaps:</p>
<div class="code-block language-bash" data-lang="bash" id="code-1895c88573f8e4e1">
  <div class="code-header">
    <span class="code-language">bash</span>
  </div>
  <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">swapon --show</span></span></code></pre></td></tr></table>
</div>
</div>
</div>



<p>Start swap with priority:</p>
<div class="code-block language-bash" data-lang="bash" id="code-1895c88573fc23c8">
  <div class="code-header">
    <span class="code-language">bash</span>
  </div>
  <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">swapon -p <span class="m">100</span> /dev/zram0</span></span></code></pre></td></tr></table>
</div>
</div>
</div>



<p>Check for zram and load it with modprobe if not showing up:</p>
<div class="code-block language-bash" data-lang="bash" id="code-1895c88574002564">
  <div class="code-header">
    <span class="code-language">bash</span>
  </div>
  <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ls /sys/block <span class="p">|</span> grep zram
</span></span><span class="line"><span class="cl">lsmod <span class="p">|</span> grep zram
</span></span><span class="line"><span class="cl">modprobe zram</span></span></code></pre></td></tr></table>
</div>
</div>
</div>



<p>Shows zram compression:</p>
<div class="code-block language-bash" data-lang="bash" id="code-1895c88574068d84">
  <div class="code-header">
    <span class="code-language">bash</span>
  </div>
  <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">zramctl</span></span></code></pre></td></tr></table>
</div>
</div>
</div>



<p>Restart zram:</p>
<div class="code-block language-bash" data-lang="bash" id="code-1895c88574094b31">
  <div class="code-header">
    <span class="code-language">bash</span>
  </div>
  <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">systemctl restart zramswap</span></span></code></pre></td></tr></table>
</div>
</div>
</div>



<p>Container config:</p>
<div class="code-block language-bash" data-lang="bash" id="code-1895c885740c45eb">
  <div class="code-header">
    <span class="code-language">bash</span>
  </div>
  <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">vi /etc/pve/lxc/&lt;id&gt;.conf
</span></span><span class="line"><span class="cl">pct config &lt;id&gt; <span class="p">|</span> grep &lt;search <span class="k">for</span> config&gt;</span></span></code></pre></td></tr></table>
</div>
</div>
</div>



<p>Check for oom issues: e.g. killing a process because of low RAM</p>
<div class="code-block language-bash" data-lang="bash" id="code-1895c88574112ed2">
  <div class="code-header">
    <span class="code-language">bash</span>
  </div>
  <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">dmesg <span class="p">|</span> grep -i oom</span></span></code></pre></td></tr></table>
</div>
</div>
</div>



<p>Set correct access privilges for the storage (so containers can access it)</p>
<div class="code-block language-bash" data-lang="bash" id="code-1895c88574147623">
  <div class="code-header">
    <span class="code-language">bash</span>
  </div>
  <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">chown -R 101000:101000 &lt;some-file&gt;</span></span></code></pre></td></tr></table>
</div>
</div>
</div></div>





<div class="readon">
  
<div class="post-navigation">


  <div class="prev">
      
	<p>&lt;-- Previous on</p>
        <a class="previous-post" href="https://kb.alexbutenschoen.com/posts/fix-exceeding-swapping/">Fix Exceeding Swapping on a Small Proxmox Server</a>
      
  </div>
  <div class="next">
      
        <span class="no-next"></span>
      

  </div>

</div>


</div>


  

  
  
  </main>
  <footer>
    <p>Alex' Knowledge Base &copy; 2026.</p>
  </footer>
</body>
</html>
